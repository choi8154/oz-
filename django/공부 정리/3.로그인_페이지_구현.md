# 로그인 페이지 구현 (장고에서 제공되는 서비스)
> [장고 공식 authentication 자료 링크](https://docs.djangoproject.com/en/5.2/topics/auth/default/)

### 1) accounts 라우터 등록하기
- 경로 추가 : 미리 만들어진 엔드포인트 함수를 등록함.
```python
from djnago.urls import include

urlpatterns = [
    ...,
    path('accounts/', include("django.contrib.auth.urls"))
]
```


### 2) 로그인 페이지 구현
- registration/login.html을 만들어서 자동 매핑되게 함
```html
...
<body>
<form method = "post">
    <!-- 토큰이 없으면 404 리턴 -->
    {% csrf_token %}
    <!-- form의 p테그로 만들어짐 -->
    {{ form.as_p }} 
    <button>submit</button>
</form>
</body>
</html>
```

- 로그인 본문 html에 유저 이름 출력하기
```html
...
<h2> {{ request.user.username }} <h2>
...
```



### 3) 로그아웃 페이지 구현
- egistration/login.html을 만들어서 자동 매핑되게 함
```html
<body>
<nav>
    <div style="text-align: right">
        <!-- 로그인 시 로그아웃이 뜨고 아니면 로그인이 뜨게 -->
        {% if request.user.is_authenticated %}
        <form action="{% url 'logout' %}" method="post" style="display: inline">
            {% csrf_token %}
            <button>로그아웃</button>
        {{ request.user.username }}
        </form>
        {% else %}
        <a href="{% url 'login' %}">로그인</a>
        {% endif %}
    </div>
</nav>
</body>
```



### 4) 로그인, 로그아웃 시 리다이랙트되는 경로 settings에 추가
- settings.py에 해당 변수 추가 : LOGIN_REDIRECT_URL = '/'
- settings.py에 해당 변수 추가 : LOGOUT_REDIRECT_URL = '/'


===

# 직접 로그인 페이지 만들기

### 1) 엔드포인트 라우터 생성
- urls에 라우터 함수 생성
```python
from django.shortcuts import render
from django.contrib.auth.form import AuthenticationForm
from django.contrib.auth import login as django_login
from django.urls import reverse # urls의 path의 name을 찾아줌.

def login(request):
    form = AuthenticationForm(request, request.POST or None)
    
    if form.valid():
        django_login(form.get_user())
        return redirect(reverse("blog_list"))
    
    context = {
        'form':form
    }
    return render(...)
```